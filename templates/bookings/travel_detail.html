{% extends 'base.html' %}
{% load static %}

{% block title %}{{ travel_option.type }} Details - Travel Booking{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4>
                    {% if travel_option.type == 'FLIGHT' %}
                        <i class="bi bi-airplane travel-icon flight"></i>
                    {% elif travel_option.type == 'TRAIN' %}
                        <i class="bi bi-train-front travel-icon train"></i>
                    {% else %}
                        <i class="bi bi-bus-front travel-icon bus"></i>
                    {% endif %}
                    {{ travel_option.get_type_display }} Details
                </h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Route Information</h5>
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>From:</strong></td>
                                <td>{{ travel_option.source }}</td>
                            </tr>
                            <tr>
                                <td><strong>To:</strong></td>
                                <td>{{ travel_option.destination }}</td>
                            </tr>
                            <tr>
                                <td><strong>Date:</strong></td>
                                <td>{{ travel_option.date_time|date:"F d, Y" }}</td>
                            </tr>
                            <tr>
                                <td><strong>Time:</strong></td>
                                <td>{{ travel_option.date_time|time:"H:i" }}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h5>Pricing & Availability</h5>
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>Price per seat:</strong></td>
                                <td class="price-display">${{ travel_option.price }}</td>
                            </tr>
                            <tr>
                                <td><strong>Available seats:</strong></td>
                                <td class="seats-info">{{ travel_option.available_seats }}</td>
                            </tr>
                            <tr>
                                <td><strong>Total seats:</strong></td>
                                <td>{{ travel_option.total_seats }}</td>
                            </tr>
                            <tr>
                                <td><strong>Status:</strong></td>
                                <td>
                                    {% if travel_option.is_available %}
                                    <span class="badge bg-success">Available</span>
                                    {% else %}
                                    <span class="badge bg-danger">Unavailable</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <hr>
                
                <div class="row">
                    <div class="col-12">
                        <h5>Travel ID</h5>
                        <p class="text-muted font-monospace">{{ travel_option.travel_id }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-ticket"></i> Quick Booking</h5>
            </div>
            <div class="card-body text-center">
                {% if user.is_authenticated %}
                    {% if travel_option.is_available %}
                    <div class="mb-3">
                        <div class="price-display">${{ travel_option.price }}</div>
                        <small class="text-muted">per seat</small>
                    </div>
                    <div class="mb-3">
                        <p class="seats-info">
                            <i class="bi bi-people"></i> 
                            {{ travel_option.available_seats }} seats available
                        </p>
                    </div>
                    <a href="{% url 'bookings:book_travel' travel_option.travel_id %}" class="btn btn-primary btn-lg">
                        <i class="bi bi-ticket"></i> Book Now
                    </a>
                    {% else %}
                    <div class="empty-state">
                        <i class="bi bi-x-circle"></i>
                        <h6>Not Available</h6>
                        <p class="text-muted">This travel option is currently unavailable.</p>
                    </div>
                    {% endif %}
                {% else %}
                <div class="mb-3">
                    <div class="price-display">${{ travel_option.price }}</div>
                    <small class="text-muted">per seat</small>
                </div>
                <p class="text-muted">Please login to book this travel option.</p>
                <a href="{% url 'accounts:login' %}" class="btn btn-primary">
                    <i class="bi bi-box-arrow-in-right"></i> Login
                </a>
                <a href="{% url 'accounts:register' %}" class="btn btn-outline-primary">
                    <i class="bi bi-person-plus"></i> Register
                </a>
                {% endif %}
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-body">
                <h6><i class="bi bi-info-circle"></i> Booking Information</h6>
                <ul class="list-unstyled small text-muted">
                    <li>• Free cancellation up to departure time</li>
                    <li>• Instant confirmation</li>
                    <li>• Secure payment processing</li>
                    <li>• 24/7 customer support</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <a href="{% url 'bookings:travel_list' %}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to Search
        </a>
    </div>
</div>
{% endblock %}
